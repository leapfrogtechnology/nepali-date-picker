var calendarFunctions={};!function($){var calendarData={bsMonths:["बैशाख","जेठ","असार","साउन","भदौ","असोज","कार्तिक","मंसिर","पौष","माघ","फागुन","चैत"],bsMonthsEnglish:["Baishakh","Jestha","Ashad","Sharwan","Bhadra","Ashwin","Kartik","Mangsir","Poush","Magh","Falgun","Chaitra"],bsDays:["आइत","सोम","मंगल","बुध","बिही","शुक्र","शनि"],bsDaysEnglish:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],bsDaysFull:["आइतबार","सोमबार","मंगलबार","बुधबार","बिहीबार","शुक्रबार","शनिबार"],bsDaysFullEnglish:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],nepaliNumbers:["०","१","२","३","४","५","६","७","८","९"],bsMonthUpperDays:[[30,31],[31,32],[31,32],[31,32],[31,32],[30,31],[29,30],[29,30],[29,30],[29,30],[29,30],[30,31]],extractedBsMonthData:[[0,1,1,22,1,3,1,1,1,3,1,22,1,3,1,3,1,22,1,3,1,19,1,3,1,1,3,1,2,2,1,3,1],[1,2,2,2,2,2,2,1,3,1,3,1,2,2,2,3,2,2,2,1,3,1,3,1,2,2,2,2,2,2,2,2,2,2,2,1,3,1,2,2,2,2,2,2,2,2,2,2,2,1,3,1,2,2,2,2,2,1,1,1,2,2,2,2,2,1,3,1,1,2],[0,1,2,1,3,1,3,1,2,2,2,2,2,2,2,2,3,2,2,2,2,2,2,2,2,1,3,1,3,1,2,2,2,2,2,2,2,2,2,1,3,1,3,1,2,2,2,2,2,2,2,2,2,1,3,1,3,1,1,1,1,2,2,2,2,2,1,3,1,1,2],[1,2,1,3,1,3,1,3,1,3,1,3,1,3,1,3,1,3,1,3,1,3,1,3,1,3,1,3,1,2,2,2,1,3,1,3,1,3,1,3,1,3,1,2,2,2,1,3,1,3,1,3,1,3,1,3,1,3,2,2,1,3,1,2,2,2,1,2],[59,1,26,1,28,1,2,1,12],[0,1,2,2,2,2,2,2,2,2,2,2,2,1,3,1,3,1,3,1,2,2,2,2,2,2,2,2,2,2,2,1,3,1,2,2,2,2,2,2,2,2,2,2,2,1,3,1,2,2,2,2,2,2,2,2,2,2,5,1,1,2,2,1,3,1,2,1,2],[0,12,1,3,1,3,1,5,1,11,1,3,1,3,1,18,1,3,1,3,1,18,1,3,1,3,1,27,1,2],[1,2,2,2,2,1,2,2,2,2,2,2,2,3,1,3,2,2,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,1,2,2,2,15,2,4],[0,1,2,2,2,2,1,3,1,3,1,3,1,2,2,2,3,2,2,2,1,3,1,3,1,3,1,2,2,2,2,2,2,2,1,3,1,3,1,3,1,2,2,2,2,2,2,2,2,2,1,3,1,3,1,2,2,2,15,2,4],[1,1,3,1,3,1,14,1,3,1,1,1,3,1,14,1,3,1,3,1,3,1,18,1,3,1,3,1,3,1,14,1,3,15,1,2,1,1],[0,1,1,3,1,3,1,10,1,3,1,3,1,1,1,3,1,3,1,10,1,3,1,3,1,3,1,3,1,14,1,3,1,3,1,3,1,3,1,10,1,20,1,1,1],[1,2,2,1,3,1,3,1,3,1,2,2,2,2,2,3,2,2,2,2,2,1,3,1,3,1,3,1,2,2,2,2,2,2,2,1,3,1,3,1,3,1,3,1,2,2,2,2,2,2,2,1,3,1,3,1,20,3]],minBsYear:1970,maxBsYear:2100,minAdDateEqBsDate:{ad:{year:1913,month:3,date:13},bs:{year:1970,month:1,date:1}}},validationFunctions_validateRequiredParameters=function(requiredParameters){$.each(requiredParameters,function(key,value){if(null==value)throw new ReferenceError("Missing required parameters: "+Object.keys(requiredParameters).join(", "))})},validationFunctions_validateBsYear=function(bsYear){if("number"!=typeof bsYear||null===bsYear)throw new TypeError("Invalid parameter bsYear value");if(bsYear<calendarData.minBsYear||bsYear>calendarData.maxBsYear)throw new RangeError("Parameter bsYear value should be in range of "+calendarData.minBsYear+" to "+calendarData.maxBsYear)},validationFunctions_validateAdYear=function(adYear){if("number"!=typeof adYear||null===adYear)throw new TypeError("Invalid parameter adYear value");if(adYear<calendarData.minBsYear-57||adYear>calendarData.maxBsYear-57)throw new RangeError("Parameter adYear value should be in range of "+(calendarData.minBsYear-57)+" to "+(calendarData.maxBsYear-57))},validationFunctions_validateBsMonth=function(bsMonth){if("number"!=typeof bsMonth||null===bsMonth)throw new TypeError("Invalid parameter bsMonth value");if(bsMonth<1||12<bsMonth)throw new RangeError("Parameter bsMonth value should be in range of 1 to 12")},validationFunctions_validateAdMonth=function(adMonth){if("number"!=typeof adMonth||null===adMonth)throw new TypeError("Invalid parameter adMonth value");if(adMonth<1||12<adMonth)throw new RangeError("Parameter adMonth value should be in range of 1 to 12")},validationFunctions_validateBsDate=function(bsDate){if("number"!=typeof bsDate||null===bsDate)throw new TypeError("Invalid parameter bsDate value");if(bsDate<1||32<bsDate)throw new RangeError("Parameter bsDate value should be in range of 1 to 32")},validationFunctions_validateAdDate=function(adDate){if("number"!=typeof adDate||null===adDate)throw new TypeError("Invalid parameter adDate value");if(adDate<1||31<adDate)throw new RangeError("Parameter adDate value should be in range of 1 to 31")},validationFunctions_validatePositiveNumber=function(numberParameters){$.each(numberParameters,function(key,value){if("number"!=typeof value||null===value||value<0)throw new ReferenceError("Invalid parameters: "+Object.keys(numberParameters).join(", "));if("yearDiff"===key&&value>calendarData.maxBsYear-calendarData.minBsYear+1)throw new RangeError("Parameter yearDiff value should be in range of 0 to "+(calendarData.maxBsYear-calendarData.minBsYear+1))})};$.extend(calendarFunctions,{isNumeric:function(char){return"string"==typeof char&&(!isNaN(char)&&!isNaN(parseFloat(char)))},getNepaliNumber:function(number){if(void 0===number)throw new Error("Parameter number is required");if("number"!=typeof number||number<0)throw new Error("Number should be positive integer");var prefixNum=Math.floor(number/10),number=number%10;return 0!==prefixNum?calendarFunctions.getNepaliNumber(prefixNum)+calendarData.nepaliNumbers[number]:calendarData.nepaliNumbers[number]},getNumberByNepaliNumber:function(nepaliNumber,allow_english=!1){if(void 0===nepaliNumber)throw new Error("Parameter nepaliNumber is required");if("string"!=typeof nepaliNumber)throw new Error("Parameter nepaliNumber should be in string");for(var number=0,i=0;i<nepaliNumber.length;i++){var numIndex=calendarData.nepaliNumbers.indexOf(nepaliNumber.charAt(i));if(-1===numIndex&&!allow_english)throw new Error("Invalid nepali number");if(-1===numIndex&&!this.isNumeric(nepaliNumber.charAt(i)))throw new Error("Invalid number");number=-1===numIndex?10*number+parseInt(nepaliNumber.charAt(i)):10*number+numIndex}return number},getBsMonthInfoByBsDate:function(bsYear,bsMonth,bsDate,dateFormatPattern,locale="ne"){if(validationFunctions_validateRequiredParameters({bsYear:bsYear,bsMonth:bsMonth,bsDate:bsDate}),validationFunctions_validateBsYear(bsYear),validationFunctions_validateBsMonth(bsMonth),validationFunctions_validateBsDate(bsDate),null===dateFormatPattern)dateFormatPattern="%D, %M %d, %y";else if("string"!=typeof dateFormatPattern)throw new TypeError("Invalid parameter dateFormatPattern value");var daysNumFromMinBsYear=calendarFunctions.getTotalDaysNumFromMinBsYear(bsYear,bsMonth,bsDate),adDate=new Date(calendarData.minAdDateEqBsDate.ad.year,calendarData.minAdDateEqBsDate.ad.month,calendarData.minAdDateEqBsDate.ad.date-1),adDate=(adDate.setDate(adDate.getDate()+daysNumFromMinBsYear),calendarFunctions.getAdDateByBsDate(bsYear,bsMonth,1)),daysNumFromMinBsYear=calendarFunctions.getBsMonthDays(bsYear,bsMonth),eqAdDate=calendarFunctions.getAdDateByBsDate(bsYear,bsMonth,bsDate=daysNumFromMinBsYear<bsDate?daysNumFromMinBsYear:bsDate);return{bsYear:bsYear,bsMonth:bsMonth,bsDate:bsDate,weekDay:eqAdDate.getDay()+1,formattedDate:calendarFunctions.bsDateFormat(dateFormatPattern,bsYear,bsMonth,bsDate,locale),adDate:eqAdDate,bsMonthFirstAdDate:adDate,bsMonthDays:daysNumFromMinBsYear}},getAdDateByBsDate:function(bsYear,bsMonth,bsDate){validationFunctions_validateRequiredParameters({bsYear:bsYear,bsMonth:bsMonth,bsDate:bsDate}),validationFunctions_validateBsYear(bsYear),validationFunctions_validateBsMonth(bsMonth),validationFunctions_validateBsDate(bsDate);bsYear=calendarFunctions.getTotalDaysNumFromMinBsYear(bsYear,bsMonth,bsDate),bsMonth=new Date(calendarData.minAdDateEqBsDate.ad.year,calendarData.minAdDateEqBsDate.ad.month,calendarData.minAdDateEqBsDate.ad.date-1);return bsMonth.setDate(bsMonth.getDate()+bsYear),bsMonth},getTotalDaysNumFromMinBsYear:function(bsYear,bsMonth,bsDate){if(validationFunctions_validateRequiredParameters({bsYear:bsYear,bsMonth:bsMonth,bsDate:bsDate}),validationFunctions_validateBsYear(bsYear),validationFunctions_validateBsMonth(bsMonth),validationFunctions_validateBsDate(bsDate),bsYear<calendarData.minBsYear||bsYear>calendarData.maxBsYear)return null;for(var daysNumFromMinBsYear=0,diffYears=bsYear-calendarData.minBsYear,month=1;month<=12;month++)daysNumFromMinBsYear+=month<bsMonth?calendarFunctions.getMonthDaysNumFormMinBsYear(month,1+diffYears):calendarFunctions.getMonthDaysNumFormMinBsYear(month,diffYears);return daysNumFromMinBsYear+=2085<bsYear&&bsYear<2088||2085===bsYear&&5<bsMonth?bsDate-2:2088<bsYear||2088===bsYear&&5<bsMonth?bsDate-4:bsDate},getMonthDaysNumFormMinBsYear:function(bsMonth,yearDiff){validationFunctions_validateRequiredParameters({bsMonth:bsMonth,yearDiff:yearDiff}),validationFunctions_validateBsMonth(bsMonth),validationFunctions_validatePositiveNumber({yearDiff:yearDiff});var yearCount=0,monthDaysFromMinBsYear=0;if(0===yearDiff)return 0;for(var bsMonthData=calendarData.extractedBsMonthData[bsMonth-1],i=0;i<bsMonthData.length;i++)if(0!==bsMonthData[i]){var bsMonthUpperDaysIndex=i%2;if(!(yearDiff>yearCount+bsMonthData[i])){monthDaysFromMinBsYear+=calendarData.bsMonthUpperDays[bsMonth-1][bsMonthUpperDaysIndex]*(yearDiff-yearCount),yearCount=yearDiff-yearCount;break}yearCount+=bsMonthData[i],monthDaysFromMinBsYear+=calendarData.bsMonthUpperDays[bsMonth-1][bsMonthUpperDaysIndex]*bsMonthData[i]}return monthDaysFromMinBsYear},getBsMonthDays:function(bsYear,bsMonth){validationFunctions_validateRequiredParameters({bsYear:bsYear,bsMonth:bsMonth}),validationFunctions_validateBsYear(bsYear),validationFunctions_validateBsMonth(bsMonth);for(var yearCount=0,totalYears=bsYear+1-calendarData.minBsYear,bsMonthData=calendarData.extractedBsMonthData[bsMonth-1],i=0;i<bsMonthData.length;i++)if(0!==bsMonthData[i]){var bsMonthUpperDaysIndex=i%2;if(totalYears<=(yearCount+=bsMonthData[i]))return 2085===bsYear&&5===bsMonth||2088===bsYear&&5===bsMonth?calendarData.bsMonthUpperDays[bsMonth-1][bsMonthUpperDaysIndex]-2:calendarData.bsMonthUpperDays[bsMonth-1][bsMonthUpperDaysIndex]}return null},getBsDateByAdDate:function(adYear,adMonth,adDate){validationFunctions_validateRequiredParameters({adYear:adYear,adMonth:adMonth,adDate:adDate}),validationFunctions_validateAdYear(adYear),validationFunctions_validateAdMonth(adMonth),validationFunctions_validateAdDate(adDate);var adYear=adYear+57,bsMonth=(adMonth+9)%12,bsDate=(bsMonth=0===bsMonth?12:bsMonth,1),adMonth=((adMonth<4||4===adMonth&&adDate<calendarFunctions.getAdDateByBsDate(adYear,1,1).getDate())&&--adYear,calendarFunctions.getAdDateByBsDate(adYear,bsMonth,1));return bsDate=1<=adDate&&adDate<adMonth.getDate()?calendarFunctions.getBsMonthDays(adYear,bsMonth=1!==bsMonth?bsMonth-1:12)-(adMonth.getDate()-adDate)+1:adDate-adMonth.getDate()+1,{bsYear:adYear,bsMonth:bsMonth,bsDate:bsDate}},getBsYearByAdDate:function(adYear,adMonth,adDate){return validationFunctions_validateRequiredParameters({adYear:adYear,adMonth:adMonth,adDate:adDate}),validationFunctions_validateAdYear(adYear),validationFunctions_validateAdMonth(adMonth),validationFunctions_validateAdDate(adDate),calendarFunctions.getBsDateByAdDate(adYear,adMonth,adDate).bsYear},getBsMonthByAdDate:function(adYear,adMonth,adDate){return validationFunctions_validateRequiredParameters({adYear:adYear,adMonth:adMonth,adDate:adDate}),validationFunctions_validateAdYear(adYear),validationFunctions_validateAdMonth(adMonth),validationFunctions_validateAdDate(adDate),calendarFunctions.getBsDateByAdDate(adYear,adMonth,adDate).bsMonth},bsDateFormat:function(dateFormatPattern,bsYear,bsMonth,bsDate,locale="ne"){validationFunctions_validateRequiredParameters({dateFormatPattern:dateFormatPattern,bsYear:bsYear,bsMonth:bsMonth,bsDate:bsDate}),validationFunctions_validateBsYear(bsYear),validationFunctions_validateBsMonth(bsMonth),validationFunctions_validateBsDate(bsDate);var weekDay=calendarFunctions.getAdDateByBsDate(bsYear,bsMonth,bsDate).getDay()+1;return dateFormatPattern="en"==locale?(dateFormatPattern=(dateFormatPattern=(dateFormatPattern=(dateFormatPattern=(dateFormatPattern=(dateFormatPattern=(dateFormatPattern=dateFormatPattern.replace(/%d/g,bsDate)).replace(/%0d/g,1==bsDate.toString().length?"0"+bsDate:bsDate)).replace(/%y/g,bsYear)).replace(/%m/g,bsMonth)).replace(/%0m/g,1==bsMonth.toString().length?"0"+bsMonth:bsMonth)).replace(/%M/g,calendarData.bsMonthsEnglish[bsMonth-1])).replace(/%D/g,calendarData.bsDaysEnglish[weekDay-1])).replace(/%l/g,calendarData.bsDaysFullEnglish[weekDay-1]):(locale=calendarFunctions.getNepaliNumber(bsDate),dateFormatPattern=(dateFormatPattern=(dateFormatPattern=dateFormatPattern.replace(/%d/g,locale)).replace(/%0d/g,1==bsDate.toString().length?"०"+locale:locale)).replace(/%y/g,calendarFunctions.getNepaliNumber(bsYear)),bsDate=calendarFunctions.getNepaliNumber(bsMonth),(dateFormatPattern=(dateFormatPattern=(dateFormatPattern=(dateFormatPattern=dateFormatPattern.replace(/%m/g,bsDate)).replace(/%0m/g,1==bsMonth.toString().length?"०"+bsDate:bsDate)).replace(/%M/g,calendarData.bsMonths[bsMonth-1])).replace(/%D/g,calendarData.bsDays[weekDay-1])).replace(/%l/g,calendarData.bsDaysFull[weekDay-1]))},parseFormattedBsDate:function(dateFormat,dateFormattedText){validationFunctions_validateRequiredParameters({dateFormat:dateFormat,dateFormattedText:dateFormattedText});for(var eqAdDate,diffTextNum=0,extractedFormattedBsDate={bsYear:null,bsMonth:null,bsDate:null,bsDay:null},i=0;i<dateFormat.length;i++)if("%"===dateFormat.charAt(i)){var valueOf,endChar="0"===dateFormat.charAt(i+1)?(valueOf=dateFormat.substring(i,i+3),dateFormat.charAt(i+3)):(valueOf=dateFormat.substring(i,i+2),dateFormat.charAt(i+2)),tempText=dateFormattedText.substring(i+diffTextNum),endChar=""!==endChar?tempText.indexOf(endChar):tempText.length,tempText=tempText.substring(0,endChar);if("%y"===valueOf)extractedFormattedBsDate.bsYear=calendarFunctions.getNumberByNepaliNumber(tempText,!0),diffTextNum+=tempText.length-2;else if("%d"===valueOf)extractedFormattedBsDate.bsDate=calendarFunctions.getNumberByNepaliNumber(tempText,!0),diffTextNum+=tempText.length-2;else if("%0d"===valueOf)extractedFormattedBsDate.bsDate=calendarFunctions.getNumberByNepaliNumber(tempText,!0),diffTextNum+=tempText.length-3;else if("%D"===valueOf){if(-1!==calendarData.bsDays.indexOf(tempText))extractedFormattedBsDate.bsDay=calendarData.bsDays.indexOf(tempText)+1;else{if(-1===calendarData.bsDaysEnglish.indexOf(tempText))throw Error("Invalid format for %D with value "+tempText);extractedFormattedBsDate.bsDay=calendarData.bsDaysEnglish.indexOf(tempText)+1}diffTextNum+=tempText.length-2}else if("%l"===valueOf){if(-1!==calendarData.bsDaysFull.indexOf(tempText))extractedFormattedBsDate.bsDay=calendarData.bsDaysFull.indexOf(tempText)+1;else{if(-1===calendarData.bsDaysFullEnglish.indexOf(tempText))throw Error("Invalid format for %l with value "+tempText);extractedFormattedBsDate.bsDay=calendarData.bsDaysFullEnglish.indexOf(tempText)+1}diffTextNum+=tempText.length-2}else if("%m"===valueOf)extractedFormattedBsDate.bsMonth=calendarFunctions.getNumberByNepaliNumber(tempText,!0),diffTextNum+=tempText.length-2;else if("%0m"===valueOf)extractedFormattedBsDate.bsMonth=calendarFunctions.getNumberByNepaliNumber(tempText,!0),diffTextNum+=tempText.length-3;else if("%M"===valueOf){if(-1!==calendarData.bsMonths.indexOf(tempText))extractedFormattedBsDate.bsMonth=calendarData.bsMonths.indexOf(tempText)+1;else{if(-1===calendarData.bsMonthsEnglish.indexOf(tempText))throw Error("Invalid format for %M with value "+tempText);extractedFormattedBsDate.bsMonth=calendarData.bsMonthsEnglish.indexOf(tempText)+1}diffTextNum+=tempText.length-2}}return extractedFormattedBsDate.bsDay||(eqAdDate=calendarFunctions.getAdDateByBsDate(extractedFormattedBsDate.bsYear,extractedFormattedBsDate.bsMonth,extractedFormattedBsDate.bsDate),extractedFormattedBsDate.bsDay=eqAdDate.getDay()+1),extractedFormattedBsDate}}),$.fn.nepaliDatePicker=function(options){var datePickerPlugin={options:$.extend({dateFormat:"%D, %M %d, %y",locale:"ne",closeOnDateSelect:!0,defaultDate:"",minDate:null,maxDate:null,yearStart:calendarData.minBsYear,yearEnd:calendarData.maxBsYear},options),init:function($element){$element.prop("readonly",!0);var $nepaliDatePicker=$('<div class="nepali-date-picker">');$("body").append($nepaliDatePicker),""!==$element.val()?datePickerPlugin.renderFormattedSpecificDateCalendar($nepaliDatePicker,datePickerPlugin.options.dateFormat,$element.val()):datePickerPlugin.renderCurrentMonthCalendar($nepaliDatePicker),datePickerPlugin.addEventHandler($element,$nepaliDatePicker),datePickerPlugin.addCommonEventHandler($nepaliDatePicker)},addCommonEventHandler:function(){var $datePickerWrapper=$(".nepali-date-picker");$(document).click(function(event){$(event.target).is($(".nepali-date-picker"))||($datePickerWrapper.hide(),$datePickerWrapper.find(".drop-down-content").hide())})},addEventHandler:function($element,$nepaliDatePicker){$element.click(function(){var inputFieldPosition;{if(!$(".nepali-date-picker").is(":visible"))return inputFieldPosition=$(this).offset(),$nepaliDatePicker.css({top:inputFieldPosition.top+$(this).outerHeight(!0),left:inputFieldPosition.left}),$element.val()&&datePickerPlugin.renderFormattedSpecificDateCalendar($nepaliDatePicker,datePickerPlugin.options.dateFormat,$element.val()),$nepaliDatePicker.show(),datePickerPlugin.eventFire($element,$nepaliDatePicker,"show"),!1;$(".nepali-date-picker").hide()}}),$nepaliDatePicker.on("click",".next-btn",function(event){event.preventDefault();event={bsYear:$nepaliDatePicker.data().bsYear,bsMonth:$nepaliDatePicker.data().bsMonth,bsDate:$nepaliDatePicker.data().bsDate};return datePickerPlugin.renderNextMonthCalendar($nepaliDatePicker),datePickerPlugin.triggerChangeEvent($element,$nepaliDatePicker,event),$nepaliDatePicker.show(),!1}),$nepaliDatePicker.on("click",".prev-btn",function(event){event.preventDefault();event={bsYear:$nepaliDatePicker.data().bsYear,bsMonth:$nepaliDatePicker.data().bsMonth,bsDate:$nepaliDatePicker.data().bsDate};datePickerPlugin.renderPreviousMonthCalendar($nepaliDatePicker),$nepaliDatePicker.data();return datePickerPlugin.triggerChangeEvent($element,$nepaliDatePicker,event),$nepaliDatePicker.show(),!1}),$nepaliDatePicker.on("click",".today-btn",function(event){event.preventDefault();event={bsYear:$nepaliDatePicker.data().bsYear,bsMonth:$nepaliDatePicker.data().bsMonth,bsDate:$nepaliDatePicker.data().bsDate};datePickerPlugin.renderCurrentMonthCalendar($nepaliDatePicker),$nepaliDatePicker.data();return datePickerPlugin.triggerChangeEvent($element,$nepaliDatePicker,event),$nepaliDatePicker.show(),!1}),$nepaliDatePicker.on("click",".current-year-txt, .current-month-txt",function(){var $optionWrapper,scrollTopTo;return $(this).find(".drop-down-content").is(":visible")?$(this).find(".drop-down-content").hide():($nepaliDatePicker.find(".drop-down-content").hide(),$(this).find(".drop-down-content").show(),($optionWrapper=$(this).find(".option-wrapper")).scrollTop(0),scrollTopTo=$optionWrapper.find(".active").position().top,$optionWrapper.scrollTop(scrollTopTo)),!1}),$nepaliDatePicker.on("click",".current-month-date",function(){var bsYear,bsMonth,datePickerData,bsDate,dateText;if(!$(this).hasClass("disable"))return datePickerData=$nepaliDatePicker.data(),bsYear=datePickerData.bsYear,bsMonth=datePickerData.bsMonth,datePickerData=datePickerData.bsDate,bsDate=$(this).data("date"),dateText=calendarFunctions.bsDateFormat(datePickerPlugin.options.dateFormat,bsYear,bsMonth,bsDate,datePickerPlugin.options.locale),$element.val(dateText),datePickerPlugin.setCalendarDate($nepaliDatePicker,bsYear,bsMonth,bsDate),datePickerPlugin.renderMonthCalendar($nepaliDatePicker),datePickerData!==bsDate&&datePickerPlugin.eventFire($element,$nepaliDatePicker,"dateChange"),datePickerPlugin.eventFire($element,$nepaliDatePicker,"dateSelect"),datePickerPlugin.options.closeOnDateSelect?$nepaliDatePicker.hide():$nepaliDatePicker.show(),!1}),$nepaliDatePicker.on("click",".drop-down-content li",function(){var $dropDown=$(this).parents(".drop-down-content"),$dropDown=($dropDown.data("value",$(this).data("value")),$dropDown.attr("data-value",$(this).data("value")),{bsYear:$nepaliDatePicker.data().bsYear,bsMonth:$nepaliDatePicker.data().bsMonth,bsDate:$nepaliDatePicker.data().bsDate}),bsMonth=$nepaliDatePicker.find(".month-drop-down").data("value"),bsYear=$nepaliDatePicker.find(".year-drop-down").data("value");datePickerPlugin.setCalendarDate($nepaliDatePicker,bsYear,bsMonth,$dropDown.bsDate),datePickerPlugin.renderMonthCalendar($nepaliDatePicker),$nepaliDatePicker.data();return datePickerPlugin.triggerChangeEvent($element,$nepaliDatePicker,$dropDown),$nepaliDatePicker.show(),!1})},triggerChangeEvent:function($element,$nepaliDatePicker,preCalendarData){var calendarData=$nepaliDatePicker.data();preCalendarData.bsYear!==calendarData.bsYear&&datePickerPlugin.eventFire($element,$nepaliDatePicker,"yearChange"),preCalendarData.bsMonth!==calendarData.bsMonth&&datePickerPlugin.eventFire($element,$nepaliDatePicker,"monthChange"),preCalendarData.bsDate!==calendarData.bsDate&&datePickerPlugin.eventFire($element,$nepaliDatePicker,"dateChange")},eventFire:function($element,$nepaliDatePicker,eventType){switch(eventType){case"generate":$element.trigger({type:eventType,message:"Nepali date picker initialize",datePickerData:$nepaliDatePicker.data(),time:new Date});break;case"show":$element.trigger({type:eventType,message:"Show nepali date picker",datePickerData:$nepaliDatePicker.data(),time:new Date});break;case"close":$element.trigger({type:eventType,message:"close nepali date picker",datePickerData:$nepaliDatePicker.data(),time:new Date});break;case"dateSelect":$element.trigger({type:eventType,message:"Select date",datePickerData:$nepaliDatePicker.data(),time:new Date});break;case"dateChange":$element.trigger({type:eventType,message:"Change date",datePickerData:$nepaliDatePicker.data(),time:new Date});break;case"monthChange":$element.trigger({type:eventType,message:"Change month",datePickerData:$nepaliDatePicker.data(),time:new Date});break;case"yearChange":$element.trigger({type:eventType,message:"Change year",datePickerData:$nepaliDatePicker.data(),time:new Date})}},setCalendarDate:function($nepaliDatePicker,bsYear,bsMonth,BsDate){$nepaliDatePicker.data(calendarFunctions.getBsMonthInfoByBsDate(bsYear,bsMonth,BsDate,datePickerPlugin.options.dateFormat,datePickerPlugin.options.locale))},renderMonthCalendar:function($nepaliDatePicker){$nepaliDatePicker.find(".calendar-wrapper").remove(),$nepaliDatePicker.append(datePickerPlugin.getCalendar($nepaliDatePicker)).hide()},getCalendar:function($nepaliDatePicker){var calendarWrapper=$('<div class="calendar-wrapper">'),calendarTable=(calendarWrapper.append(datePickerPlugin.getCalendarController($nepaliDatePicker)),$("<table>"));return calendarTable.append(datePickerPlugin.getCalendarHeader()),calendarTable.append(datePickerPlugin.getCalendarBody($nepaliDatePicker)),calendarWrapper.append(calendarTable),calendarWrapper},getCalendarController:function($nepaliDatePicker){var calendarController=$("<div class='calendar-controller'>");return calendarController.append('<a href="javascript:void(0);" class="prev-btn icon" title="prev"></a>'),calendarController.append('<a href="javascript:void(0);" class="today-btn icon" title=""></a>'),calendarController.append(datePickerPlugin.getMonthDropOption($nepaliDatePicker)),calendarController.append(datePickerPlugin.getYearDropOption($nepaliDatePicker)),calendarController.append('<a href="javascript:void(0);" class="next-btn icon" title="next"></a>'),calendarController},getMonthDropOption:function($nepaliDatePicker){for(var $nepaliDatePicker=$nepaliDatePicker.data(),$monthSpan=$('<div class="current-month-txt">'),data=($monthSpan.text(calendarData.bsMonths[$nepaliDatePicker.bsMonth-1]),$monthSpan.append('<i class="icon icon-drop-down">'),[]),i=0;i<12;i++)data.push({label:calendarData.bsMonths[i],value:i+1});$nepaliDatePicker=datePickerPlugin.getCustomSelectOption(data,$nepaliDatePicker.bsMonth).addClass("month-drop-down");return $monthSpan.append($nepaliDatePicker),$monthSpan},getYearDropOption:function($nepaliDatePicker){for(var $nepaliDatePicker=$nepaliDatePicker.data(),$yearSpan=$('<div class="current-year-txt">'),data=($yearSpan.text(calendarFunctions.getNepaliNumber($nepaliDatePicker.bsYear)),$yearSpan.append('<i class="icon icon-drop-down">'),[]),i=datePickerPlugin.options.yearStart;i<=datePickerPlugin.options.yearEnd;i++)data.push({label:calendarFunctions.getNepaliNumber(i),value:i});$nepaliDatePicker=datePickerPlugin.getCustomSelectOption(data,$nepaliDatePicker.bsYear).addClass("year-drop-down");return $yearSpan.append($nepaliDatePicker),$yearSpan},getCustomSelectOption:function(datas,activeValue){var $dropDown=$('<div class="drop-down-content" data-value="'+activeValue+'">'),$dropDownWrapper=$('<div class="option-wrapper">'),$ul=$("<ul>");return $.each(datas,function(index,data){$ul.append('<li data-value="'+data.value+'">'+data.label+"</li>")}),$dropDownWrapper.append($ul),$ul.find('li[data-value="'+activeValue+'"]').addClass("active"),$dropDown.append($dropDownWrapper),$dropDown},getCalendarHeader:function(){for(var calendarHeader=$("<thead>"),tableRow=$("<tr>"),i=0;i<7;i++)tableRow.append("<td>"+calendarData.bsDays[i]+"</td>");return calendarHeader.append(tableRow),calendarHeader},getCalendarBody:function($nepaliDatePicker){for(var datePickerData=$nepaliDatePicker.data(),weekCoverInMonth=Math.ceil((datePickerData.bsMonthFirstAdDate.getDay()+datePickerData.bsMonthDays)/7),$nepaliDatePicker=datePickerData.bsMonth-1!=0?datePickerData.bsMonth-1:12,preYear=12==$nepaliDatePicker?datePickerData.bsYear-1:datePickerData.bsYear,preMonthDays=preYear>=calendarData.minBsYear?calendarFunctions.getBsMonthDays(preYear,$nepaliDatePicker):30,minBsDate=null,maxBsDate=null,calendarBody=(null!==datePickerPlugin.options.minDate&&(minBsDate=calendarFunctions.parseFormattedBsDate(datePickerPlugin.options.dateFormat,datePickerPlugin.options.minDate)),null!==datePickerPlugin.options.maxDate&&(maxBsDate=calendarFunctions.parseFormattedBsDate(datePickerPlugin.options.dateFormat,datePickerPlugin.options.maxDate)),$("<tbody>")),i=0;i<weekCoverInMonth;i++){for(var tableRow=$("<tr>"),k=1;k<=7;k++){var calendarDate=7*i+k-datePickerData.bsMonthFirstAdDate.getDay(),isCurrentMonthDate=!0;calendarDate<=0?(calendarDate=preMonthDays+calendarDate,isCurrentMonthDate=!1):calendarDate>datePickerData.bsMonthDays&&(calendarDate-=datePickerData.bsMonthDays,isCurrentMonthDate=!1),isCurrentMonthDate?(isCurrentMonthDate=$('<td class="current-month-date" data-date="'+calendarDate+'" data-weekDay="'+(k-1)+'">'+calendarFunctions.getNepaliNumber(calendarDate)+"</td>"),calendarDate==datePickerData.bsDate&&isCurrentMonthDate.addClass("active"),datePickerPlugin.disableIfOutOfRange(isCurrentMonthDate,datePickerData,minBsDate,maxBsDate,calendarDate),tableRow.append(isCurrentMonthDate)):tableRow.append('<td class="other-month-date">'+calendarFunctions.getNepaliNumber(calendarDate)+"</td>")}calendarBody.append(tableRow)}return calendarBody},disableIfOutOfRange:function($td,datePickerData,minBsDate,maxBsDate,calendarDate){return null!==minBsDate&&(datePickerData.bsYear<minBsDate.bsYear||datePickerData.bsYear===minBsDate.bsYear&&datePickerData.bsMonth<minBsDate.bsMonth||datePickerData.bsYear===minBsDate.bsYear&&datePickerData.bsMonth===minBsDate.bsMonth&&calendarDate<minBsDate.bsDate)&&$td.addClass("disable"),null!==maxBsDate&&(datePickerData.bsYear>maxBsDate.bsYear||datePickerData.bsYear===maxBsDate.bsYear&&datePickerData.bsMonth>maxBsDate.bsMonth||datePickerData.bsYear===maxBsDate.bsYear&&datePickerData.bsMonth===maxBsDate.bsMonth&&calendarDate>maxBsDate.bsDate)&&$td.addClass("disable"),$td},renderCurrentMonthCalendar:function($nepaliDatePicker){var currentDate=new Date,currentDate=calendarFunctions.getBsDateByAdDate(currentDate.getFullYear(),currentDate.getMonth()+1,currentDate.getDate()),bsYear=currentDate.bsYear,bsMonth=currentDate.bsMonth,currentDate=currentDate.bsDate;datePickerPlugin.setCalendarDate($nepaliDatePicker,bsYear,bsMonth,currentDate),datePickerPlugin.renderMonthCalendar($nepaliDatePicker)},renderPreviousMonthCalendar:function($nepaliDatePicker){var datePickerData=$nepaliDatePicker.data(),prevMonth=0<datePickerData.bsMonth-1?datePickerData.bsMonth-1:12,prevYear=12!=prevMonth?datePickerData.bsYear:datePickerData.bsYear-1,datePickerData=datePickerData.bsDate;if(prevYear<datePickerPlugin.options.yearStart||prevYear>datePickerPlugin.options.yearEnd)return null;datePickerPlugin.setCalendarDate($nepaliDatePicker,prevYear,prevMonth,datePickerData),datePickerPlugin.renderMonthCalendar($nepaliDatePicker)},renderNextMonthCalendar:function($nepaliDatePicker){var datePickerData=$nepaliDatePicker.data(),nextMonth=datePickerData.bsMonth+1<=12?datePickerData.bsMonth+1:1,nextYear=1!==nextMonth?datePickerData.bsYear:datePickerData.bsYear+1,datePickerData=datePickerData.bsDate;if(nextYear<datePickerPlugin.options.yearStart||nextYear>datePickerPlugin.options.yearEnd)return null;datePickerPlugin.setCalendarDate($nepaliDatePicker,nextYear,nextMonth,datePickerData),datePickerPlugin.renderMonthCalendar($nepaliDatePicker)},renderFormattedSpecificDateCalendar:function($nepaliDatePicker,dateFormat,dateFormattedText){dateFormat=calendarFunctions.parseFormattedBsDate(dateFormat,dateFormattedText);datePickerPlugin.setCalendarDate($nepaliDatePicker,dateFormat.bsYear,dateFormat.bsMonth,dateFormat.bsDate),datePickerPlugin.renderMonthCalendar($nepaliDatePicker)}};return this.each(function(){var $element=$(this);datePickerPlugin.init($element)}),datePickerPlugin.addCommonEventHandler(),this}}(jQuery);